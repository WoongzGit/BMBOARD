<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>BMBoard</title>

    <meta name="description" content="Source code generated using layoutit.com">
    <meta name="author" content="LayoutIt!">

    <link href="/bmboard/css/bootstrap/bootstrap.min.css" rel="stylesheet">
    
  </head>
  <body>
    <div class="container-fluid">
		<div class="row">
			<div class="col-md-12">
				<nav class="navbar navbar-expand-lg navbar-light bg-light navbar-dark bg-dark static-top">
					 
					<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
						<span class="navbar-toggler-icon"></span>
					</button> <a class="navbar-brand" href="#" id="test">BMBoard</a>
					<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
						<ul class="navbar-nav">
							<li class="nav-item">
								<a class="nav-link" href="/bmboard/news/list.html">Hacker's News <span class="sr-only">(current)</span></a>
							</li>
							<li class="nav-item active">
								<a class="nav-link" href="/bmboard/board/list.html">Boards <span class="sr-only">(current)</span></a>
							</li>
						</ul>
						<ul class="navbar-nav ml-md-auto">
							<li class="nav-item">
								<a class="nav-link" href="/bmboard/mypage/view.html">myPage</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="#">Logout</a>
							</li>
							<li class="nav-item dropdown">
								<a class="nav-link dropdown-toggle" href="javascript:void(0);" id="navbarDropdownMenuLink" data-toggle="dropdown">Login</a>
								<div class="dropdown-menu dropdown-menu-right">
									<form class="px-4 py-3">
									<div class="form-group">
										<label for="exampleDropdownFormEmail1">Email address</label>
										<input type="email" class="form-control" id="exampleDropdownFormEmail1" placeholder="email@example.com">
									</div>
									<div class="form-group">
										<label for="exampleDropdownFormPassword1">Password</label>
										<input type="password" class="form-control" id="exampleDropdownFormPassword1" placeholder="Password">
									</div>
									<div class="form-check">
										<input type="checkbox" class="form-check-input" id="dropdownCheck">
										<label class="form-check-label" for="dropdownCheck">
										Remember me
										</label>
									</div>
									<button type="submit" class="btn btn-primary">Sign in</button>
									</form>
									<div class="dropdown-divider"></div>
									<a class="dropdown-item" href="#">New around here? Sign up</a>
									<a class="dropdown-item" href="#">Forgot password?</a>
								</div>
							</li>
						</ul>
					</div>
				</nav>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3">
					<h1 class="h2" id="spanBoardTitle">사용자 관리</h1>
				</div>
				<div class="form-group">
					<label for="postTitle">제목</label>
					<input type="text" class="form-control" id="postTitle" name="postTitle">
					<input type="hidden" id="csrf" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
				</div>
				<div class="form-group">
					<label for="postContents">본문</label>
					<textarea class="form-control" id="postContents" name="postContents" rows="10" style="resize:none;"></textarea>
				</div>
			</div>
		</div>
		
		<div class="row">
			<div class="col-12">
				<p class="text-right mt-5 mb-5">
					<button type='button' id='buttonInsert' class='btn btn-info btn-sm'>
						<span data-feather='edit'></span>저장
					</button>
					<button type='button' class='btn btn-info btn-sm buttonToList'>
						<span data-feather='edit'></span>목록
					</button>
				</p>
			</div>
		</div>
		
		<div class="modal fade" tabindex="-1" id="dialogComplete" role="dialog" aria-labelledby="edit" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
							<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
						</button>
						<h4 class="modal-title custom_align" id="Heading">정상 처리</h4>
					</div>
					<div class="modal-body">
						<div class="alert alert-success">
							<span class="glyphicon glyphicon-warning-sign" id="msg">저장됐습니다.</span>
						</div>
					</div>
					<div class="modal-footer ">
						<button type="button" class="btn btn-success buttonToList" data-dismiss="modal"><span class="glyphicon glyphicon-ok-sign">OK</span></button>
					</div>
				</div>
			</div>
		</div>
		
		<div class="modal fade" tabindex="-1" id="dialogAlert" role="dialog" aria-labelledby="edit" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
							<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
						</button>
						<h4 class="modal-title custom_align" id="Heading">오류 발생</h4>
					</div>
					<div class="modal-body">
						<div class="alert alert-danger">
							<span class="glyphicon glyphicon-warning-sign" id="msg"></span>
						</div>
					</div>
					<div class="modal-footer ">
						<button type="button" class="btn btn-danger" data-dismiss="modal"><span class="glyphicon glyphicon-ok-sign">OK</span></button>
					</div>
				</div>
			</div>
		</div>
	</div>
	
    <script src="/bmboard/js/jquery/jquery.min.js"></script>
    <script src="/bmboard/js/bootstrap/bootstrap.min.js"></script>
    <script src="/bmboard/js/dashboard/commons.js"></script>
    <script src="/bmboard/js/dashboard/feather.min.js"></script>
    <script src="/bmboard/js/jquery/jquery.twbsPagination.js"></script>
    <script>
	    $(document).ready(function(){
	    	$(document).ready(function(){
				var init = function(){
					getBoard();
				};
				
				/* 게시판 상세 조회 */
				var getBoard = function(){
					var url = "/bmboard/board/[[${post.boardIdx}]]";
					var type = "GET";
					var data = {
						  _csrf:$('#csrf').val()
					}
					var onParam = {}
					
					getList(url, type, data, viewBoard, onParam);
				}
				
				/* 게시판 상세 조회 콜백 */
				var viewBoard = function(data){
					$('#spanBoardTitle').text(data.board.boardName);
				}
				
				/* 게시글 저장 */
				$('#buttonInsert').on("click", function(){
					var url = "/bmboard/post";
					var type = "POST";
					var data = {
						  _csrf:$('#csrf').val()
						, postContents:$('#postContents').val()
						, postTitle:$('#postTitle').val()
						, boardIdx:"[[${post.boardIdx}]]"
					}
					var onParam = {}
					
					getList(url, type, data, insertPost, onParam);
				});
				
				/* 게시글 저장 콜백 */
				var insertPost = function(data){
					if(data.resultVo.code == "0000"){
   			    		$('#dialogComplete').modal('show');
   			    	}else{
   			    		$('#dialogAlert #msg').html(data.resultVo.msg);
 			    		$('#dialogAlert').modal('show');
   			    	}
				}
				
				/* 목록 버튼 */
				$(document).on("click", ".buttonToList", function(){
					location.href="/bmboard/board/list.html";
				});
				
				init();
			});
		});
    </script>
  </body>
</html>